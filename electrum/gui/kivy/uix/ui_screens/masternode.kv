#:import _ electrum.gui.kivy.i18n._
#:import Decimal decimal.Decimal
#:set btc_symbol chr(171)
#:set mbtc_symbol chr(187)
#:set font_light 'electrum/gui/kivy/data/fonts/Roboto-Condensed.ttf'


<CardLabel@Label>
    color: 0.95, 0.95, 0.95, 1
    size_hint: 1, None
    text: ''
    text_size: self.width, None
    height: self.texture_size[1]
    halign: 'left'
    valign: 'top'


<MasternodeItem@CardItem>
    icon: 'atlas://electrum/gui/kivy/theming/light/important'
    txid: ''
    index: ''
    status: ''
    alias: ''
    collateral: ''
    delegate: ''
    ipaddress: ''
    port: ''
    announced: False
    status_color: '#00FF00' if (self.status == 'ENABLED' or self.status == 'PRE_ENABLED') else '#FF8000'
    Image:
        id: icon
        source: root.icon
        size_hint: None, 1
        allow_stretch: True
        width: self.height*1.5
        mipmap: True
    BoxLayout:
        orientation: 'vertical'
        Widget
        CardLabel:
            text: root.txid + '-' + root.index
            font_size: '13sp'
        CardLabel:
            color: .699, .699, .699, 1
            font_size: '13sp'
            shorten: True
            text: u'[color={color}]{s}[/color]'.format(s=root.status, color=root.status_color) + '  ' + root.alias
        Widget

<MasternodeRecycleView>:
    viewclass: 'MasternodeItem'
    RecycleBoxLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint: 1, None
        height: self.minimum_height
        orientation: 'vertical'

MasternodeScreen:
    id: s
    name: 'masternode'    
    alias: ''
    collateral: ''
    utxo: ''
    delegate: ''
    ip: ''
    info: ''
    is_pr: False
    content: masternode_container    
    BoxLayout
        padding: '12dp', '12dp', '12dp', '12dp'
        spacing: '12dp'
        orientation: 'vertical'
        SendReceiveBlueBottom:
            id: blue_bottom
            size_hint: 1, None
            height: self.minimum_height
            BoxLayout:
                id: alias_selection
                size_hint: 1, None
                height: blue_bottom.item_height
                spacing: '5dp'
                Image:
                    source: 'atlas://electrum/gui/kivy/theming/light/star_big_inactive'
                    size_hint: None, None
                    size: '22dp', '22dp'
                    pos_hint: {'center_y': .5}
                BlueButton:
                    id: alias_e
                    text: s.alias if s.alias else _('Alias')
                    font_size: '13sp'
                    shorten: True
                    disabled: False
                    on_release: Clock.schedule_once(lambda dt: app.masternode_dialog(_('Enter Alias'), s))
            CardSeparator:
                opacity: int(not root.is_pr)
                color: blue_bottom.foreground_color            
            BoxLayout:
                id: collateral_selection
                size_hint: 1, None
                height: blue_bottom.item_height
                spacing: '5dp'
                Image:
                    source: 'atlas://electrum/gui/kivy/theming/light/globe'
                    opacity: 0.7
                    size_hint: None, None
                    size: '22dp', '22dp'
                    pos_hint: {'center_y': .5}
                BlueButton:
                    id: collateral_e
                    text: s.collateral if s.collateral else _('Collateral Key')
                    font_size: '13sp'
                    disabled: False
                    on_release: Clock.schedule_once(lambda dt: app.show_info(_('please scan.')))
            CardSeparator:
                opacity: int(not root.is_pr)
                color: blue_bottom.foreground_color
            BoxLayout:
                id: utxo_selection
                size_hint: 1, None
                height: blue_bottom.item_height
                spacing: '5dp'
                Image:
                    source: 'atlas://electrum/gui/kivy/theming/light/pen'
                    size_hint: None, None
                    size: '22dp', '22dp'
                    pos_hint: {'center_y': .5}
                BlueButton:
                    id: utxo_e
                    text: s.utxo if s.utxo else _('Collateral Utxo')
                    font_size: '13sp'
                    disabled: False
                    on_release: Clock.schedule_once(lambda dt: app.show_info(_('please scan.')))
            CardSeparator:
                opacity: int(not root.is_pr)
                color: blue_bottom.foreground_color                    
            BoxLayout:
                id: delegate_selection
                size_hint: 1, None
                height: blue_bottom.item_height
                spacing: '5dp'
                Image:
                    source: 'atlas://electrum/gui/kivy/theming/light/dip3_op'
                    size_hint: None, None
                    size: '22dp', '22dp'
                    pos_hint: {'center_y': .5}
                BlueButton:
                    id: delegate_e
                    text: s.delegate if s.delegate else _('Masternode Private Key')
                    font_size: '13sp'
                    shorten: True
                    disabled: False
                    on_release: Clock.schedule_once(lambda dt: app.show_info(_('Copy and paste the masternode private key using the Paste button, or use the camera to scan a QR code.')))
            CardSeparator:
                opacity: int(not root.is_pr)
                color: blue_bottom.foreground_color                    
            BoxLayout:
                id: ip_selection
                size_hint: 1, None
                height: blue_bottom.item_height
                spacing: '5dp'
                Image:
                    source: 'atlas://electrum/gui/kivy/theming/light/dip3_op'
                    size_hint: None, None
                    size: '22dp', '22dp'
                    pos_hint: {'center_y': .5}
                BlueButton:
                    id: ip_e
                    text: s.ip if s.ip else _('Masternode IP Address')
                    font_size: '13sp'
                    shorten: True
                    disabled: False
                    on_release: Clock.schedule_once(lambda dt: app.masternode_dialog(_('Enter IP Address'), s))
        BoxLayout:
            size_hint: 1, None
            height: '48dp'
            IconButton:
                id: save
                size_hint: 0.5, 1
                on_release: s.parent.do_save()
                icon: 'atlas://electrum/gui/kivy/theming/light/save'
            Button:
                id: clear
                text: _('Clear')
                size_hint: 1, 1
                on_release: s.parent.do_clear()
            Button:
                id: paste
                text: _('Paste')
                size_hint: 1, 1
                on_release: s.parent.do_paste()
            IconButton:
                id: qr
                size_hint: 0.5, 1
                on_release: Clock.schedule_once(lambda dt: app.scan_qr(on_complete=s.parent.on_qr_delegate))
                icon: 'atlas://electrum/gui/kivy/theming/light/camera'
        BoxLayout:
            size_hint: 1, None
            height: '48dp'
            Button:
                id: test
                text: _('Show')
                size_hint: 1, 1
                on_release: s.parent.do_show()
                disabled: False
            Button:
                id: generate
                text: _('Generate')
                size_hint: 1, 1
                on_release: s.parent.do_generate()
                disabled: False
            Button:
                id: mimport
                text: _('Import')
                size_hint: 1, 1
                on_release: s.parent.do_import()
            Button:
                id: scan
                text: _('Scan')
                size_hint: 1, 1
                on_release: s.parent.do_scan()
        MasternodeRecycleView:
            id: masternode_container
            scroll_type: ['bars', 'content']
            bar_width: '25dp'


